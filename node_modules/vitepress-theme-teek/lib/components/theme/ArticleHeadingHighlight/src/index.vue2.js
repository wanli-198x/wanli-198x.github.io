'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var Vue = require('vue');
var vitepress = require('vitepress');
var index = require('../../../../helper/dist/index.js');
var useEventListener = require('../../../../composables/useEventListener.js');
var useNamespace = require('../../../../composables/useNamespace.js');
require('vitepress-theme-teek/theme-chalk/tk-copy-banner.css');
require('../../../../composables/useZIndex.js');

var _sfc_main = /* @__PURE__ */ Vue.defineComponent({
  __name: "index",
  setup(__props) {
    const ns = useNamespace.useNamespace("article-heading-highlight");
    const handleHighlight = () => {
      if (!index.isClient || !window.location.hash) return;
      const targetedHashId = decodeURIComponent(window.location.hash);
      if (!targetedHashId) return;
      let elem;
      try {
        elem = document.querySelector(targetedHashId);
      } catch (e) {
        return console.error(e);
      }
      if (!elem) return;
      if (!elem.classList.contains(ns.b())) {
        elem.classList.add(ns.b());
      }
      elem.classList.remove(ns.b());
      setTimeout(() => {
        if (elem) elem.classList.add(ns.b());
      }, 10);
    };
    const route = vitepress.useRoute();
    Vue.watch(route, async () => {
      await Vue.nextTick();
      handleHighlight();
    });
    useEventListener.useEventListener(() => window, "hashchange", handleHighlight);
    return (_ctx, _cache) => {
      return null;
    };
  }
});

exports.default = _sfc_main;
