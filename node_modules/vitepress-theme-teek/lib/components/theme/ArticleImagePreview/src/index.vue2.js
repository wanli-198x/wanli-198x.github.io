'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var Vue = require('vue');
var useEventListener = require('../../../../composables/useEventListener.js');
require('vitepress');
require('vitepress-theme-teek/theme-chalk/tk-copy-banner.css');
require('../../../../composables/useZIndex.js');
var index = require('../../ConfigProvider/index.js');
var index$1 = require('../../../common/ImageViewer/index.js');

var _sfc_main = /* @__PURE__ */ Vue.defineComponent({
  __name: "index",
  setup(__props) {
    const { getTeekConfig } = index.useTeekConfig();
    const imageViewer = Vue.computed(() => {
      const { imageViewer: imageViewer2 = {} } = getTeekConfig("articleAnalyze", {});
      return imageViewer2;
    });
    const previewImage = (e) => {
      const target = e.target;
      if (target.tagName.toLowerCase() === "img" && !target.className.includes("image-viewer__img") && // 处于预览状态，点击/拖拽图片时，不重新触发预览
      !target.className.includes("no-preview")) {
        const imgDoms = target.querySelectorAll(".content-container .main img");
        const imgs = Array.from(imgDoms);
        const urlList = imgs.map((el) => el.src);
        let initialIndex = imgs.findIndex((el) => el === target);
        const url = target.getAttribute("src");
        if (initialIndex === -1 && url) {
          urlList.push(url);
          initialIndex = urlList.length - 1;
        }
        index$1.createImageViewer({ infinite: false, ...imageViewer.value, urlList, initialIndex });
      }
    };
    useEventListener.useEventListener(() => document.querySelector("#VPContent"), "click", previewImage);
    return (_ctx, _cache) => {
      return null;
    };
  }
});

exports.default = _sfc_main;
