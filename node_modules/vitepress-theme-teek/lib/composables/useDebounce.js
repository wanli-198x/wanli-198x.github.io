'use strict';

const useDebounce = (func, delay = 0, immediate = false) => {
  let timer;
  return (...args) => {
    const callNow = immediate && !timer;
    if (callNow) func(...args);
    const clearTimer = () => {
      if (timer) {
        clearTimeout(timer);
        timer = null;
      }
    };
    const later = () => {
      clearTimer();
      if (!immediate) func(...args);
    };
    clearTimer();
    timer = setTimeout(later, delay);
  };
};

exports.useDebounce = useDebounce;
