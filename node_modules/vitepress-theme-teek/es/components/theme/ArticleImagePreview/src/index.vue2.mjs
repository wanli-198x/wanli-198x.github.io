import { defineComponent, computed } from 'vue';
import { useEventListener } from '../../../../composables/useEventListener.mjs';
import 'vitepress';
import 'vitepress-theme-teek/theme-chalk/tk-copy-banner.css';
import '../../../../composables/useZIndex.mjs';
import { useTeekConfig } from '../../ConfigProvider/index.mjs';
import { createImageViewer } from '../../../common/ImageViewer/index.mjs';

var _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "index",
  setup(__props) {
    const { getTeekConfig } = useTeekConfig();
    const imageViewer = computed(() => {
      const { imageViewer: imageViewer2 = {} } = getTeekConfig("articleAnalyze", {});
      return imageViewer2;
    });
    const previewImage = (e) => {
      const target = e.target;
      if (target.tagName.toLowerCase() === "img" && !target.className.includes("image-viewer__img") && // 处于预览状态，点击/拖拽图片时，不重新触发预览
      !target.className.includes("no-preview")) {
        const imgDoms = target.querySelectorAll(".content-container .main img");
        const imgs = Array.from(imgDoms);
        const urlList = imgs.map((el) => el.src);
        let initialIndex = imgs.findIndex((el) => el === target);
        const url = target.getAttribute("src");
        if (initialIndex === -1 && url) {
          urlList.push(url);
          initialIndex = urlList.length - 1;
        }
        createImageViewer({ infinite: false, ...imageViewer.value, urlList, initialIndex });
      }
    };
    useEventListener(() => document.querySelector("#VPContent"), "click", previewImage);
    return (_ctx, _cache) => {
      return null;
    };
  }
});

export { _sfc_main as default };
