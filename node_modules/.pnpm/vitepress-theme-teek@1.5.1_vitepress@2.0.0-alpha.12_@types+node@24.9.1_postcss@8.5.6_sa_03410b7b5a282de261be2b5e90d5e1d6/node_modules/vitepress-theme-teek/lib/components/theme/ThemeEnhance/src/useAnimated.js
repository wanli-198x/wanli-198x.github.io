'use strict';

var index = require('../../../../helper/dist/index.js');
var themeEnhance = require('./themeEnhance.js');
var Vue = require('vue');
var useScopeDispose = require('../../../../composables/useScopeDispose.js');
require('vitepress');
require('vitepress-theme-teek/theme-chalk/tk-copy-banner.css');
require('../../../../composables/useZIndex.js');

const useAnimated = (delay = 1e3, immediate = false) => {
  let timer = null;
  const stop = () => {
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
  };
  const start = () => {
    if (!index.isClient) return;
    if (!immediate) {
      immediate = true;
      return;
    }
    stop();
    document.documentElement.setAttribute(`${themeEnhance.layoutModeAttribute}-animated`, "true");
    timer = setTimeout(() => {
      document.documentElement.removeAttribute(`${themeEnhance.layoutModeAttribute}-animated`);
    }, Vue.toValue(delay));
  };
  useScopeDispose.useScopeDispose(stop);
  return { start, stop };
};

exports.useAnimated = useAnimated;
