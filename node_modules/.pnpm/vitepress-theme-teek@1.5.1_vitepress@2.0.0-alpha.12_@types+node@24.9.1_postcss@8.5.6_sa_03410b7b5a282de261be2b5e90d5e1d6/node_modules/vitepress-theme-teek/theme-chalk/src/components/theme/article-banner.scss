@use "../../mixins/bem" as *;
@use "../../mixins/mixins" as *;
@use "../../mixins/function" as *;
@use "../../mixins/config" as *;

:root {
  @include set-css-var("article-banner-height", 500px);
  @include set-css-var("article-banner-info-mr", 16px);
  @include set-css-var("article-banner-text-color", #ffffff);
  @include set-css-var("article-banner-text-size", 16px);
}

@media (max-width: 768px) {
  :root {
    @include set-css-var("article-banner-text-size", 15px);
  }
}

@include b(article-banner) {
  position: relative;
  width: 100%;
  height: getCssVar("article-banner-height");
  z-index: 1;

  @media (max-width: 768px) {
    height: 100vh;
  }

  @include e(wrapper) {
    transition: getCssVar("transition-duration-slow-plus");
    overflow: hidden;
    position: relative;
    width: 100%;
    height: 100%;
    background-position: center center;
    background-size: cover;
    background-repeat: no-repeat;

    &::before {
      transition: getCssVar("transition-duration");
      height: 100%;
      background-color: var(#{getCssVarName("article-banner-bg-color")}, var(#{getCssVarName("theme-color")}));
      position: absolute;
      top: 0;
      left: 0;
      display: block;
      width: 100%;
      content: "";
    }
  }

  @include e(cover) {
    position: absolute;
    top: 0;
    display: block;
    opacity: 0.5;
    animation: showCover 1s 0.3s backwards;
    transform: scale(1.3);
    width: 100%;
    height: 100%;
    // margin: 0 -15% 0 auto;
    overflow: hidden;
    margin-bottom: 0;
    filter: blur(10px);

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.8;
      transition: all getCssVar("transition-duration-fast") ease 0s;
    }
  }

  @keyframes showCover {
    0% {
      opacity: 0;
      transform: scale(1);
    }
  }

  @include e(info) {
    padding: 0 60px;
    margin: 0 auto;
    z-index: 10;
    color: getCssVar("article-banner-text-color");
    max-width: 1400px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    width: 100%;
    height: 100%;

    @media (max-width: 768px) {
      align-items: center;
      padding: 0 6%;
      padding-top: 22rem;
      text-align: left;
    }

    h1 {
      font-weight: 700;
      font-size: 46px;
      line-height: 1.2;
      text-align: left;
      margin: 20px 0 20px 0;
      -webkit-line-clamp: 2;
      padding: 0;
      overflow: hidden;

      @media (max-width: 768px) {
        width: 100%;
        margin: 10px auto;
        text-align: center;
        font-size: 30px;
        -webkit-line-clamp: 3;
      }
    }

    // 面包屑
    .#{$namespace}-breadcrumb {
      margin-bottom: 35px;
      font-size: getCssVar("article-banner-text-size");

      &__separator {
        color: #c2c2c4;
      }

      &__inner {
        color: getCssVar("article-banner-text-color");
      }

      &__item {
        &:last-child {
          .#{$namespace}-breadcrumb__inner,
          .#{$namespace}-breadcrumb__inner a {
            &,
            &:hover {
              color: getCssVar("article-banner-text-color");
            }
          }
        }
      }
    }

    .#{$namespace}-article-analyze {
      &__wrapper {
        @media (max-width: 768px) {
          justify-content: center;
        }

        > div:not(:last-child) {
          margin-right: getCssVar("article-banner-info-mr");
        }

        .#{$namespace}-article-info {
          color: getCssVar("article-banner-text-color");

          > span:not(:last-child) {
            margin-right: getCssVar("article-banner-info-mr");
          }
        }

        i,
        a {
          font-size: getCssVar("article-banner-text-size");
          opacity: 0.85;

          &:hover {
            opacity: 1;
            color: inherit;
          }
        }
      }
    }
  }

  @include e(meta) {
    gap: 10px;
    font-size: getCssVar("article-banner-text-size");

    a {
      font-weight: 800;
    }

    .meta-info {
      padding: 0 10px;
      border-radius: 12px;
      line-height: 32px;
      height: 32px;
      transition: getCssVar("transition-duration") ease-out;
      display: flex;
      align-items: center;
      flex-direction: row;
    }

    .categories {
      gap: 8px;

      .category {
        background-color: rgba(255, 255, 255, 0.2);

        &:hover {
          color: var(#{getCssVarName("article-banner-bg-color")}, var(#{getCssVarName("theme-color")}));
          background-color: getCssVar("article-banner-text-color");
        }
      }
    }

    .tags {
      gap: 8px;

      .tag {
        color: getCssVar("article-banner-text-color");
        gap: 2px;

        &:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      }
    }
  }

  .#{$namespace}-banner-waves {
    height: 8vh;
    margin-top: -7vh;
  }

  ~ .VPNav {
    .VPNavBar:not(.home).top {
      background-color: transparent;
      color: getCssVar("article-banner-text-color");

      .VPNavBarTitle .title,
      .VPNavBarMenuLink,
      .VPNavBarMenuGroup .text,
      .VPSocialLink {
        color: getCssVar("article-banner-text-color");

        &.active,
        &:hover {
          color: getCssVar("theme-color");
        }
      }

      .divider {
        display: none;
      }

      .VPNavBarSearch .DocSearch-Button {
        background-color: transparent;

        .vp-icon,
        .DocSearch-Button-Placeholder,
        .#{$namespace}-icon {
          color: getCssVar("article-banner-text-color");
        }

        .DocSearch-Button-Key {
          color: getCssVar("article-banner-text-color");
          border: none;
          &::after {
            color: getCssVar("article-banner-text-color");
          }
        }
      }

      .VPNavBarTranslations {
        .text {
          color: getCssVar("article-banner-text-color");
        }
      }

      .VPNavBarHamburger {
        .top,
        .middle,
        .bottom {
          background-color: getCssVar("article-banner-text-color");
        }
      }

      .VPNavBarExtra {
        .button {
          color: getCssVar("article-banner-text-color");
        }
      }

      &.screen-open {
        @include set-css-var("article-banner-text-color", var(--vp-c-text-1));
        background-color: var(--vp-nav-bg-color);
      }
    }

    @media (max-width: 768px) {
      position: absolute;
    }
  }
}
