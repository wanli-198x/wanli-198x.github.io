# vitepress-plugin-md-h1

è¿™æ˜¯ä¸€ä¸ªé€‚ç”¨äº `vitepress` çš„ Vite æ’ä»¶ï¼Œåœ¨ `vitepress` å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆä¸€çº§æ ‡é¢˜åˆ° Markdown æ–‡æ¡£å¼€å¤´å¤„ï¼ˆå‡å¦‚ Markdown æ–‡æ¡£æ²¡æœ‰è®¾ç½®è¿‡ä¸€çº§æ ‡é¢˜ï¼‰ã€‚

> è¯´æ˜ï¼šåªåœ¨é¡µé¢åŠ è½½ Markdown å†…å®¹æ—¶ç”Ÿæˆä¸€çº§æ ‡é¢˜ï¼Œå¹¶ä¸ä¼šçœŸæ­£ä¿®æ”¹ Markdown æ–‡æ¡£å†…å®¹ã€‚

æ’ä»¶é»˜è®¤åªç»™ `frontmatter.layout` ä¸å­˜åœ¨æˆ–è€… `frontmatter.layout` ä¸º `doc` çš„ Markdown æ³¨å…¥ä¸€çº§æ ‡é¢˜ï¼Œå¦‚æœå¸Œæœ›å¼ºåˆ¶æ³¨å…¥ä¸€çº§æ ‡é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ `autoTitle` é…ç½®ã€‚

## âœ¨ Feature

- ğŸš€ å°† `frontmatter.title` æˆ–ã€Œæ–‡ä»¶åã€ä½œä¸ºä¸€çº§æ ‡é¢˜æ³¨å…¥åˆ° Markdown æ–‡æ¡£å¼€å¤´å¤„

## ğŸ•¯ï¸ Install

å®‰è£… `vitepress-plugin-md-h1` æ’ä»¶

```bash
# æ¨èä½¿ç”¨ pnpm
pnpm i vitepress-plugin-md-h1
# or yarn
yarn add vitepress-plugin-md-h1
# or npm
npm install vitepress-plugin-md-h1
```

æ·»åŠ  `vitepress-plugin-md-h1` æ’ä»¶åˆ° `.vitepress/config.ts`

```typescript
import { defineConfig } from "vitepress";
import MdH1 from "vitepress-plugin-md-h1";

export default defineConfig({
  vite: {
    plugins: [MdH1()],
  },
});
```

> è¯´æ˜ï¼šè¯¥æ’ä»¶ä»…é™é¡¹ç›®å¯åŠ¨æ—¶ç”Ÿæ•ˆï¼Œå·²æ”¹åŠ¨æˆ–æ–°æ·»åŠ çš„ Markdown éœ€è¦é‡å¯é¡¹ç›®æ‰èƒ½ç”Ÿæ•ˆã€‚

## ğŸ› ï¸ Options

| name         | description                                                                                                                    | type                                                                      | default |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------- | ------- | ----- | --- |
| ignoreList   | å¿½ç•¥çš„æ–‡ä»¶è·¯å¾„ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼                                                                                                 | `string[]`                                                                | `[]`    |
| beforeInject | æ·»åŠ ä¸€çº§æ ‡é¢˜å‰çš„é’©å­ï¼Œå¦‚æœè¿”å› falseï¼Œåˆ™ä¸æ·»åŠ ä¸€çº§æ ‡é¢˜ï¼Œå¦‚æœè¿”å› stringï¼Œåˆ™ä½¿ç”¨è¿”å›å€¼ä½œä¸ºä¸€çº§æ ‡é¢˜ï¼Œstring å¿…é¡»æ˜¯ä¸€ä¸ªéç©ºå­—ç¬¦ä¸² | `(frontmatter: Record<string, any>, id: string, title: string) => boolean | string  | void` |     |

## ğŸ“˜ TypeScript

### ğŸ› ï¸ Options

```typescript
export interface MdH1Option {
  /**
   * å¿½ç•¥çš„æ–‡ä»¶è·¯å¾„ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
   *
   * @default []
   */
  ignoreList?: Array<RegExp | string>;
  /**
   * æ·»åŠ ä¸€çº§æ ‡é¢˜å‰çš„é’©å­ï¼Œå¦‚æœè¿”å› falseï¼Œåˆ™ä¸æ·»åŠ ä¸€çº§æ ‡é¢˜ï¼Œå¦‚æœè¿”å› stringï¼Œåˆ™ä½¿ç”¨è¿”å›å€¼ä½œä¸ºä¸€çº§æ ‡é¢˜ï¼Œstring å¿…é¡»æ˜¯ä¸€ä¸ªéç©ºå­—ç¬¦ä¸²
   */
  beforeInject?: (frontmatter: Record<string, any>, id: string, title: string) => boolean | string | void;
}
```

## ğŸ“– Usage

å¦‚æœä¸å¸Œæœ›æŸä¸ª Markdown æ–‡æ¡£æ³¨å…¥ä¸€çº§æ ‡é¢˜ï¼Œè¯·åœ¨è¯¥æ–‡æ¡£ `frontmatter` é…ç½®ï¼š

```yaml
---
autoTitle: false
---
```

å¦‚æœä¸å¸Œæœ›æŸä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ Markdown æ–‡æ¡£æ³¨å…¥ä¸€çº§æ ‡é¢˜ï¼Œåˆ™ä½¿ç”¨ `ignoreList` é…ç½®é¡¹ï¼š

```typescript
import { defineConfig } from "vitepress";
import MdH1 from "vitepress-plugin-md-h1";

export default defineConfig({
  vite: {
    plugins: [
      MdH1({
        ignoreList: ["xxx"],
      }),
    ],
  },
});
```

å¦‚æœæƒ³æ ¹æ®æ–‡æ¡£çš„ `frontmatter` æˆ–è€…æ–‡æ¡£è·¯å¾„æ¥å†³å®šæ˜¯å¦å…è®¸æ³¨å…¥ä¸€çº§æ ‡é¢˜ï¼Œåˆ™ä½¿ç”¨ `beforeInject` é’©å­ï¼š

```typescript
import { defineConfig } from "vitepress";
import MdH1 from "vitepress-plugin-md-h1";

export default defineConfig({
  vite: {
    plugins: [
      MdH1({
        beforeInject: (frontmatter, id, title) => {
          // æ ¹æ® frontmatter çš„æŸä¸ªå€¼åˆ¤æ–­
          if (frontmatter.catalogue) return false;

          // æ ¹æ®æ–‡æ¡£è·¯å¾„åˆ¤æ–­
          if (id.includes("@page")) return false;

          // æ ¹æ®å³å°†ç”Ÿæˆçš„ä¸€çº§æ ‡é¢˜åˆ¤æ–­
          if (title === "ç®€ä»‹") return false;
        },
      }),
    ],
  },
});
```

`beforeInject` é’©å­é™¤äº†æ”¯æŒè¿”å› `false` æ¥å†³å®šæ˜¯å¦æ³¨å…¥ä¸€çº§æ ‡é¢˜ï¼Œä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢ä¸ºä¸€çº§æ ‡é¢˜ã€‚

```typescript
import { defineConfig } from "vitepress";
import MdH1 from "vitepress-plugin-md-h1";

export default defineConfig({
  vite: {
    plugins: [
      MdH1({
        beforeInject: (frontmatter, id, title) => {
          // æ ¹æ® frontmatter çš„æŸä¸ªå€¼åˆ¤æ–­
          if (frontmatter.archivesPage) return "å½’æ¡£é¡µ";

          // æ ¹æ®å³å°†ç”Ÿæˆçš„ä¸€çº§æ ‡é¢˜åˆ¤æ–­
          if (title === "ç®€ä»‹") return "æ–‡æ¡£ç®€ä»‹";
        },
      }),
    ],
  },
});
```

## ğŸ‰‘ License

[MIT](../../LICENSE) License Â© 2025 [Teeker](https://github.com/Kele-Bingtang)
