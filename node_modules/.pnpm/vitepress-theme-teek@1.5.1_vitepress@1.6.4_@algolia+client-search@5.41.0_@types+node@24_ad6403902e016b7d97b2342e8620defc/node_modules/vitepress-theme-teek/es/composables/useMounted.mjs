import { shallowRef, getCurrentInstance, onMounted, nextTick } from 'vue';

const useMounted = (fn, options = {}) => {
  const { sync = false, nexTick = true } = options;
  const isMounted = shallowRef(false);
  const instance = getCurrentInstance();
  if (instance) {
    onMounted(() => {
      isMounted.value = true;
      fn?.();
    }, instance);
  } else if (sync) fn?.();
  else if (nexTick) nextTick(fn);
  return isMounted;
};

export { useMounted };
