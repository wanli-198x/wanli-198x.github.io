'use strict';

var Vue = require('vue');
var index = require('../helper/dist/index.js');
var useEventListener = require('./useEventListener.js');

const useElementHover = (el, options = {}) => {
  const { delayEnter = 0, delayLeave = 0 } = options;
  const isHovered = Vue.shallowRef(false);
  let timer;
  const toggle = (entering) => {
    const delay = entering ? delayEnter : delayLeave;
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
    if (delay) timer = setTimeout(() => isHovered.value = entering, delay);
    else isHovered.value = entering;
  };
  if (!index.isClient) return isHovered;
  useEventListener.useEventListener(el, "mouseenter", () => toggle(true), { passive: true });
  useEventListener.useEventListener(el, "mouseleave", () => toggle(false), { passive: true });
  return isHovered;
};

exports.useElementHover = useElementHover;
